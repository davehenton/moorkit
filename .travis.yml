language: ruby
sudo: false
rvm:
  - 2.3.1

env:
  global:
    - MK_PG_URL=postgres://postgres@localhost:5432/development
    - MK_REDIS_URL=redis://localhost:637
    - MK_RESQUE_CREDS="travis:travis"
    - RAILS_ENV=test
    - RUBY_ENV=test
  matrix:
    - DB=postgresql

before_install:
  - gem install bundler -v 1.12.5

cache:
  bundler: true

before_script:
  - make db-setup

services:
  - postgresql

addons:
  postgresql: "9.4"
  code_climate:
    repo_token: 26640320ccf0d4039ee13fe4c51d514f0907efa46431a836bfbeb4be7424cfa3
